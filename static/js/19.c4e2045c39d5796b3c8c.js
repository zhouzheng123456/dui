webpackJsonp([19],{"j/Bo":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("uiKT"),n=a("C5VE"),o=a("Q/W4"),r=a("0+Q0"),s=a("oast"),c=a("+EaS"),d=a("4PKW"),l=a("KiN3"),u=a("wSez"),v=(i.a,i.a,n.a,o.a,r.a,s.a,c.a,d.a,l.a,{directives:{TransferDom:i.a},components:{TransferDom:i.a,Popup:n.a,Group:o.a,Cell:r.a,XButton:s.a,Flexbox:c.a,FlexboxItem:d.a,XInput:l.a},data:function(){return{username:"",disablecard:"",is_face:!1,video:null,card_img:"",valid_card:function(t){return{valid:/(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(t),msg:"请输入正确身份证"}}}},computed:{},beforeMount:function(){},mounted:function(){this.$refs.img_box.style.height=document.documentElement.clientHeight-document.getElementById("content_box")-51+"px"},methods:{goBack:function(){this.$router.go(-1)},initVideo:function(){var t=this;window.URL||window.webkitURL;navigator.mediaDevices.getUserMedia({audio:!0,video:{facingMode:{exact:"environment"}}}).then(function(e){console.log("stream",e),t.video=document.getElementById("video"),t.video.srcObject=e,t.video.play()}).catch(function(t){console.log(t.name+":: "+t.message)})},screenShot:function(){this.video=document.getElementById("video");var t=this.video.width,e=this.video.height,a=t/e;e=(t=240)/a;var i=document.createElement("canvas");i.width=t,i.height=e,i.getContext("2d").drawImage(this.video,0,0,t,e);var n=i.toDataURL("image/png");this.card_img=n},open_card:function(){this.is_face=!0,this.initVideo()},start_in:function(){var t=this;this.screenShot(),this.card_img=this.card_img.split("base64,")[1];var e="id_card_side=front&image="+encodeURIComponent(this.card_img);this.$API.IDS_API.scan_card(e).then(function(e){"normal"==e.data.image_status?(t.username=e.data.words_result["姓名"].words,t.disablecard=e.data.words_result["公民身份号码"].words,t.is_face=!1):Object(u.MessageBox)("提示","拍摄不清晰, 请重新识别")}).catch(function(t){console.log(t),Object(u.MessageBox)("提示","拍摄不清晰, 请重新识别")})},next_step:function(){this.$router.push("/ids/create-face")}},watch:{}}),m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"create_realname_vue"},[i("mt-header",{attrs:{title:"实名认证"}},[i("span",{attrs:{slot:"left"},on:{click:t.goBack},slot:"left"},[i("mt-button",{attrs:{icon:"back"}})],1)]),t._v(" "),i("div",{staticClass:"create-realname",attrs:{id:"content_box"}},[i("div",{staticClass:"label_text"},[t._v("姓名")]),t._v(" "),i("group",{attrs:{"label-width":"4.5em","label-margin-right":"2em","label-align":"right"}},[i("x-input",{attrs:{placeholder:"请输入姓名","placeholder-align":"center",required:"","show-clear":!1},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),t._v(" "),i("div",{staticClass:"label_text"},[t._v("身份证")]),t._v(" "),i("group",{attrs:{"label-width":"4.5em","label-margin-right":"2em","label-align":"right"}},[i("x-input",{attrs:{placeholder:"请输入身份证号","placeholder-align":"center","is-type":t.valid_card,required:"","show-clear":!1},model:{value:t.disablecard,callback:function(e){t.disablecard=e},expression:"disablecard"}})],1),t._v(" "),i("p",{staticStyle:{"text-align":"right",color:"#9a9a9a",padding:"10px 0 0 0"},on:{click:t.open_card}},[t._v("证件识别")]),t._v(" "),i("x-button",{staticStyle:{"margin-top":"30px"},attrs:{type:"primary"},nativeOn:{click:function(e){return t.next_step(e)}}},[t._v("确认")])],1),t._v(" "),i("img",{ref:"img_box",staticStyle:{"background-size":"cover",width:"100%"},attrs:{src:a("vzkW"),alt:""}}),t._v(" "),i("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[i("popup",{attrs:{position:"top","max-height":"70%"},model:{value:t.is_face,callback:function(e){t.is_face=e},expression:"is_face"}},[i("div",{staticStyle:{"text-align":"center",padding:"10px",position:"relative"}},[i("video",{attrs:{id:"video",height:"320",width:"250",poster:a("lZli")}}),t._v(" "),i("div",{staticClass:"line_face",staticStyle:{width:"240px",height:"2px"}})]),t._v(" "),i("div",{staticStyle:{padding:"10px"}},[i("flexbox",[i("flexbox-item",[i("x-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.is_face=!1}}},[t._v("关闭")])],1),t._v(" "),i("flexbox-item",[i("x-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.start_in(e)}}},[t._v("开始")])],1)],1)],1)])],1)],1)},staticRenderFns:[]};var h=a("C7Lr")(v,m,!1,function(t){a("vNwf")},"data-v-06986552",null);e.default=h.exports},vNwf:function(t,e){},vzkW:function(t,e,a){t.exports=a.p+"static/img/shimin.9b14808.jpg"}});
//# sourceMappingURL=19.c4e2045c39d5796b3c8c.js.map